{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "vconcat": [
    {
      "width": 800,
      "height": 500,
      "title": "World Map of PPP (2023)",
      "projection": {"type": "equalEarth"},
      "layer": [
        {
          "data": {
            "url": "https://vega.github.io/vega-datasets/data/world-110m.json",
            "format": {"type": "topojson", "feature": "countries"}
          },
          "mark": {"type": "geoshape", "fill": "#ddd", "stroke": "white"}
        },
        {
          "data": {
            "url": "path_to_your_ppp_csv_file.csv",
            "format": {"type": "csv"}
          },
          "transform": [
            {"filter": "datum['2023'] != null"}
          ],
          "mark": {"type": "geoshape"},
          "encoding": {
            "color": {
              "field": "2023",
              "type": "quantitative",
              "title": "PPP (2023)",
              "scale": {"scheme": "blues"}
            },
            "tooltip": [
              {"field": "country", "type": "nominal", "title": "Country"},
              {"field": "2023", "type": "quantitative", "title": "PPP in 2023"}
            ],
            "shape": {
              "field": "geo",
              "type": "geojson"
            }
          }
        }
      ],
      "selection": {
        "country_select": {
          "type": "single",
          "fields": ["country"],
          "on": "click",
          "bind": "legend"
        }
      }
    },
    {
      "width": 800,
      "height": 200,
      "title": "PPP Trend (2013-2023)",
      "data": {
        "url": "countries_and_PPP.csv",
        "format": {"type": "csv"}
      },
      "transform": [
        {"filter": "datum['country'] == country_select.country"}
      ],
      "mark": {"type": "line"},
      "encoding": {
        "x": {"field": "year", "type": "temporal", "axis": {"title": "Year"}},
        "y": {"field": "PPP", "type": "quantitative", "axis": {"title": "PPP"}},
        "color": {"field": "country", "type": "nominal", "legend": null}
      }
    }
  ]
}
