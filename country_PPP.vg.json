{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://github.com/edwa0003/FIT3179-week-10-homework/blob/main/countries_and_PPP.csv", 
    "format": {"type": "csv"}
  },
  "vconcat": [
    {
      "width": "container",
      "height": 400,
      "title": "World Map of PPP (2023)",
      "projection": {"type": "equalEarth"},
      "layer": [
        {
          "data": {
            "url": "ne_110m_admin_0_countries.topojson.txt",
            "format": {
              "type": "topojson",
              "feature": "ne_110m_admin_0_countries"
            }
          },
          "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"}
        },
        {
          "transform": [
            {"filter": "datum['2023'] != null"}
          ],
          "encoding": {
            "color": {
              "field": "2023",
              "type": "quantitative",
              "title": "PPP (2023)",
              "scale": {
                "type": "quantile",
                "range": ["#fde0dd", "#fa9fb5", "#c51b8a", "#7a0177"]
              }
            },
            "tooltip": [
              {"field": "country", "type": "nominal"},
              {"field": "2023", "type": "quantitative", "title": "PPP in 2023"}
            ],
            "lookup": {
              "from": {
                "data": {
                  "url": "path_to_your_csv_file",
                  "key": "ISO2"
                },
                "key": "ISO_A2",
                "fields": ["2023"]
              }
            }
          },
          "mark": {"type": "geoshape"}
        }
      ],
      "selection": {
        "selectedCountry": {
          "type": "single",
          "fields": ["country"],
          "on": "click",
          "bind": "legend"
        }
      }
    },
    {
      "width": "container",
      "height": 200,
      "title": "PPP Trend (2013-2023)",
      "transform": [
        {"filter": {"param": "selectedCountry"}}
      ],
      "mark": "line",
      "encoding": {
        "x": {"field": "year", "type": "temporal", "axis": {"title": "Year"}},
        "y": {"field": "ppp", "type": "quantitative", "axis": {"title": "PPP"}},
        "color": {"field": "country", "type": "nominal", "legend": null}
      }
    }
  ]
}
